Neg3 ~~ NA*Neg3
Pos1 ~~ Neg1
Pos2 ~~ Neg2
Pos3 ~~ Neg3
## directional regression paths
Pos2 ~ Pos1
Pos3 ~ Pos2
Neg2 ~ Neg1
Neg3 ~ Neg2
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
NegAFF11 ~~ NegAFF12 + NegAFF13
NegAFF12 ~~ NegAFF13
NegAFF21 ~~ NegAFF22 + NegAFF23
NegAFF22 ~~ NegAFF23
NegAFF31 ~~ NegAFF32 + NegAFF33
NegAFF32 ~~ NegAFF33
'
fit.long.path <- sem(long.path, data=long, std.lv=TRUE)
summary(fit.long.path, standardized=TRUE, fit.measures=TRUE)
semPaths(fit.long.path, layout = "tree3")
## layout can also be done manually to get publications worthy plots
long.cross <- '
## define latent variables
Pos1 =~ L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
Neg1 =~ L4*NegAFF11 + L5*NegAFF21 + L6*NegAFF31
Neg2 =~ L4*NegAFF12 + L5*NegAFF22 + L6*NegAFF32
Neg3 =~ L4*NegAFF13 + L5*NegAFF23 + L6*NegAFF33
## free latent variances at later times (only set the scale once)
Pos2 ~~ NA*Pos2
Pos3 ~~ NA*Pos3
Neg2 ~~ NA*Neg2
Neg3 ~~ NA*Neg3
Pos1 ~~ Neg1
Pos2 ~~ Neg2
Pos3 ~~ Neg3
## directional regression paths
Pos2 ~ Pos1 + Neg1
Neg2 ~ Pos1 + Neg1
Pos3 ~ Pos2 + Neg2
Neg3 ~ Pos2 + Neg2
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
NegAFF11 ~~ NegAFF12 + NegAFF13
NegAFF12 ~~ NegAFF13
NegAFF21 ~~ NegAFF22 + NegAFF23
NegAFF22 ~~ NegAFF23
NegAFF31 ~~ NegAFF32 + NegAFF33
NegAFF32 ~~ NegAFF33
'
fit.long.cross <- sem(long.cross,data=long, std.lv=TRUE)
summary(fit.long.cross, standardized=TRUE, fit.measures=TRUE)
semPaths(fit.long.cross)
semPaths(fit.long.cross, layout = "tree3")
#Do Self-Reported Social Experiences Mediate the Effect of Extraversion on Life Satisfaction and Happiness?
#number close friends
library(readr)
TSS_sub <- read_csv("~/Box Sync/5165 Applied Longitudinal Data Analysis/Longitudinal/TSS_sub.csv")
scon.model6<-'
# definine extraversion
bfie =~ a1bfi01 + a1bfi06r + a1bfi11 + a1bfi16 + a1bfi21r + a1bfi26 + a1bfi31r + a1bfi36
# correlated residuals
a1bfi11 ~~  a1bfi16
a1bfi06r ~~ a1bfi21r + a1bfi31r
a1bfi21r ~~ a1bfi31r + a1bfi01
#define social connection at 4 waves
hconnect=~h1clrel + h1satfr + h1sosat + h1ced05
jconnect=~j1clrel + j1satfr + j1sosat + j1ced05
kconnect=~k1clrel + k1satfr + k1sosat + k1ced05
mconnect=~m1clrel + m1satfr + m1sosat + m1ced05
#correlate residuals
h1clrel ~~ j1clrel + k1clrel + m1clrel
j1clrel ~~ k1clrel + m1clrel
k1clrel ~~ m1clrel
h1satfr ~~ j1satfr + k1satfr + m1satfr
j1satfr ~~ k1satfr + m1satfr
k1satfr ~~ m1satfr
h1sosat ~~ j1sosat + k1sosat + m1sosat
j1sosat ~~ k1sosat + m1sosat
k1sosat ~~ m1sosat
h1ced05 ~~ j1ced05 + k1ced05 + m1ced05
j1ced05 ~~ k1ced05 + m1ced05
k1ced05 ~~ m1ced05
# same time covariances between extraversion, connection, satisfaction
bfie~~a1swls
hconnect ~~ h1swls
jconnect ~~ j1swls
kconnect ~~ k1swls
#regressions to calculate indiret effects
hconnect ~ a1*bfie + d1*a1swls
jconnect ~ a2*bfie + d2*h1swls + m1*hconnect
kconnect ~ a3*bfie + d3*j1swls + m2*jconnect
mconnect ~ a4*bfie + d4*k1swls + m3*kconnect
h1swls ~ y1*a1swls + c1*bfie
j1swls ~ y2*h1swls + c2*bfie + b1*hconnect
k1swls ~ y3*j1swls + c3*bfie + b2*jconnect
m1swls ~ y4*k1swls + c4*bfie + b3*kconnect
#effects
# extraversion -> connect (a)
# connect ->  swb (b)
# extraversion -> swb (c)
# auto-regressive connection (m)
# auto-regressive swb (y)
ind:= a1*b1*y3*y4 + a1*m1*b2*y4 + a1*m1*m2*b3 + a2*b2*y4 + a2*m2*b3 + a3*b3
total:= ind + c4 + c3*y4 + c2*y3*y4 + c1*y2*y3*y4
'
scon62 <- sem(scon.model6, data=TSS_sub, missing = "ml", fixed.x = FALSE)
summary(scon62, standardized=T, fit.measures=TRUE)
# use se = "bootstrap" in the fit function to get bootstrapped se
model.1 <- '  i =~ 1*t1 + 1*t2 + 1*t3 + 1*t4
s =~ 0*t1 + 1*t2 + 2*t3 + 3*t4'
fit.1 <- growth(model.1, data=Demo.growth)
summary(fit.1)
semPaths(fit.1)
semPaths(fit.1, 'est')
model.2 <- '  i =~ 1*t1 + 1*t2 + 1*t3 + 1*t4
s =~ 0*t1 + t2 + t3 + 3*t4'
fit.2 <- growth(model.2, data=Demo.growth)
summary(fit.2)
model.3 <- '  i =~ 1*t1 + 1*t2 + 1*t3 + 1*t4
s =~ 0*t1 + t2 + t3 + 3*t4
s ~~0*s'
fit.3 <- growth(model.3, data=Demo.growth)
summary(fit.3)
# a linear growth model with a time invariatnt covariate
model.4 <- '
# intercept and slope with fixed coefficients
i =~ 1*t1 + 1*t2 + 1*t3 + 1*t4
s =~ 0*t1 + 1*t2 + 2*t3 + 3*t4
# regressions
i ~ x1 + x2
s ~ x1 + x2
'
fit.4 <- growth(model.4, data = Demo.growth)
summary(fit.4)
# centered predictor
Demo.growth$x1.c <- scale(Demo.growth$x1, center=TRUE, scale = FALSE)
Demo.growth$x2.c <- scale(Demo.growth$x2, center=TRUE, scale = FALSE)
model.5 <- '
# intercept and slope with fixed coefficients
i =~ 1*t1 + 1*t2 + 1*t3 + 1*t4
s =~ 0*t1 + 1*t2 + 2*t3 + 3*t4
# regressions
i ~ x1.c + x2.c
s ~ x1.c + x2.c
'
fit.5 <- growth(model.5, data = Demo.growth)
summary(fit.5)
# a linear growth model with a time-varying covariate
model.6 <- '
# intercept and slope with fixed coefficients
i =~ 1*t1 + 1*t2 + 1*t3 + 1*t4
s =~ 0*t1 + 1*t2 + 2*t3 + 3*t4
# regressions
i ~ x1 + x2
s ~ x1 + x2
# time-varying covariates
t1 ~ c1
t2 ~ c2
t3 ~ c3
t4 ~ c4
'
fit.6 <- growth(model.6, data = Demo.growth)
summary(fit.6)
model.bi <- '
#create positive affect growth model
i.p =~ 1*PosAFF11 + 1*PosAFF12 + 1*PosAFF13
s.p =~ 0*PosAFF11 + 1*PosAFF12 + 2*PosAFF13
# create negative affect growth model
i.n =~ 1*NegAFF11 + 1*NegAFF12 + 1*NegAFF13
s.n =~ 0*NegAFF11 + 1*NegAFF12 + 2*NegAFF13
'
fit.bi <- growth(model.bi, data = long)
summary(fit.bi)
semPaths(fit.bi)
inspect(fit.bi,"cor.lv")
config <- cfa(config, data=long, meanstructure=TRUE, std.lv=TRUE)
summary(config, standardized=TRUE, fit.measures=TRUE)
weak <- '
## define latent variables
Pos1 =~ L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## free latent variances at later times (only set the scale once)
Pos2 ~~ NA*Pos2
Pos3 ~~ NA*Pos3
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
'
weak <- cfa(weak, data=long, meanstructure=TRUE, std.lv=TRUE)
summary(weak, standardized=TRUE, fit.measures=TRUE)
strong <- '
## define latent variables
Pos1 =~ L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## free latent variances at later times (only set the scale once)
Pos2 ~~ NA*Pos2
Pos3 ~~ NA*Pos3
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
## constrain intercepts across time
PosAFF11 ~ t1*1
PosAFF21 ~ t2*1
PosAFF31 ~ t3*1
PosAFF12 ~ t1*1
PosAFF22 ~ t2*1
PosAFF32 ~ t3*1
PosAFF13 ~ t1*1
PosAFF23 ~ t2*1
PosAFF33 ~ t3*1
## free latent means at later times (only set the scale once)
Pos2 ~ NA*1
Pos3 ~ NA*1'
strong <- cfa(strong, data=dat, meanstructure=TRUE, std.lv=TRUE)
strong <- cfa(strong, data=long, meanstructure=TRUE, std.lv=TRUE)
anova(config, weak)
fitmeasures(fit91)["cfi"]
fitmeasures(fit92)["cfi"]
fitmeasures(config)["cfi"]
fitmeasures(weak)["cfi"]
anova(weak, strong)
fitmeasures(fit92)['cfi']
fitmeasures(weak)['cfi']
fitmeasures(strong)['cfi']
anova(config, strong)
anova(weak, strong)
fitmeasures(weak)['cfi']
fitmeasures(strong)['cfi']
strict <- '
## define latent variables
Pos1 =~ L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## free latent variances at later times (only set the scale once)
Pos2 ~~ NA*Pos2
Pos3 ~~ NA*Pos3
## correlated residuals across time
PosAFF11 ~~ r*PosAFF12 + r*PosAFF13
PosAFF12 ~~ r*PosAFF13
PosAFF21 ~~ r*PosAFF22 + r*PosAFF23
PosAFF22 ~~ r*PosAFF23
PosAFF31 ~~ r*PosAFF32 + r*PosAFF33
PosAFF32 ~~ r*PosAFF33
## constrain intercepts across time
PosAFF11 ~ t1*1
PosAFF21 ~ t2*1
PosAFF31 ~ t3*1
PosAFF12 ~ t1*1
PosAFF22 ~ t2*1
PosAFF32 ~ t3*1
PosAFF13 ~ t1*1
PosAFF23 ~ t2*1
PosAFF33 ~ t3*1
## free latent means at later times (only set the scale once)
Pos2 ~ NA*1
Pos3 ~ NA*1'
strict <- cfa(strict, data=long, meanstructure=TRUE, std.lv=TRUE)
summary(strict, standardized=TRUE, fit.measures=TRUE)
strict <- '
## define latent variables
Pos1 =~ L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## free latent variances at later times (only set the scale once)
Pos2 ~~ NA*Pos2
Pos3 ~~ NA*Pos3
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
## equality of residuals
PosAFF11 ~~ r*PosAFF11
PosAFF12 ~~ r*PosAFF12
PosAFF13 ~~ r*PosAFF13
PosAFF21 ~~ r*PosAFF21
PosAFF22 ~~ r*PosAFF22
PosAFF23 ~~ r*PosAFF23
PosAFF31 ~~ r*PosAFF31
PosAFF32 ~~ r*PosAFF32
PosAFF33 ~~ r*PosAFF33
## constrain intercepts across time
PosAFF11 ~ t1*1
PosAFF21 ~ t2*1
PosAFF31 ~ t3*1
PosAFF12 ~ t1*1
PosAFF22 ~ t2*1
PosAFF32 ~ t3*1
PosAFF13 ~ t1*1
PosAFF23 ~ t2*1
PosAFF33 ~ t3*1
## free latent means at later times (only set the scale once)
Pos2 ~ NA*1
Pos3 ~ NA*1'
strict <- cfa(strict, data=long, meanstructure=TRUE, std.lv=TRUE)
summary(strict, standardized=TRUE, fit.measures=TRUE)
anova(config, weak)
fitmeasures(weak)['cfi']
fitmeasures(strong)['cfi']
fitmeasures(strict)['cfi']
fitmeasures(weak)['cfi']
fitmeasures(strong)['cfi']
fitmeasures(strict)['cfi']
sec.order <- '
## define latent variables
Pos1 =~ NA*PosAFF11 + L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ NA*PosAFF12 + L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ NA*PosAFF13 + L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## intercepts
PosAFF11 ~ t1*1
PosAFF21 ~ t2*1
PosAFF31 ~ t3*1
PosAFF12 ~ t1*1
PosAFF22 ~ t2*1
PosAFF32 ~ t3*1
PosAFF13 ~ t1*1
PosAFF23 ~ t2*1
PosAFF33 ~ t3*1
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
## latent variable intercepts
A1_i ~ 0*1
A2_i ~ 0*1
A3_i ~ 0*1
#model constraints for effect coding
## loadings must average to 1
L1 == 3 - L2 - L3
## means must average to 0
t1 == 0 - t2 - t3
i =~ 1*A1_i + 1*A2_i + 1*A3_i
s =~ 0*A1_i + 2.5*A2_i + 7*A3_i '
fit.sec.order <- growth(sec.order, data=long, missing = "ML")
sec.order <- '
## define latent variables
Pos1 =~ NA*PosAFF11 + L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ NA*PosAFF12 + L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ NA*PosAFF13 + L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## intercepts
PosAFF11 ~ t1*1
PosAFF21 ~ t2*1
PosAFF31 ~ t3*1
PosAFF12 ~ t1*1
PosAFF22 ~ t2*1
PosAFF32 ~ t3*1
PosAFF13 ~ t1*1
PosAFF23 ~ t2*1
PosAFF33 ~ t3*1
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
## latent variable intercepts
A1_i ~ 0*1
A2_i ~ 0*1
A3_i ~ 0*1
#model constraints for effect coding
## loadings must average to 1
L1 == 3 - L2 - L3
## means must average to 0
t1 == 0 - t2 - t3
i =~ 1*Pos1 + 1*Pos2 + 1*Pos3
s =~ 0*Pos1 + 1*Pos2 + 2*Pos3 '
fit.sec.order <- growth(sec.order, data=long, missing = "ML")
sec.order <- '
## define latent variables
Pos1 =~ NA*PosAFF11 + L1*PosAFF11 + L2*PosAFF21 + L3*PosAFF31
Pos2 =~ NA*PosAFF12 + L1*PosAFF12 + L2*PosAFF22 + L3*PosAFF32
Pos3 =~ NA*PosAFF13 + L1*PosAFF13 + L2*PosAFF23 + L3*PosAFF33
## intercepts
PosAFF11 ~ t1*1
PosAFF21 ~ t2*1
PosAFF31 ~ t3*1
PosAFF12 ~ t1*1
PosAFF22 ~ t2*1
PosAFF32 ~ t3*1
PosAFF13 ~ t1*1
PosAFF23 ~ t2*1
PosAFF33 ~ t3*1
## correlated residuals across time
PosAFF11 ~~ PosAFF12 + PosAFF13
PosAFF12 ~~ PosAFF13
PosAFF21 ~~ PosAFF22 + PosAFF23
PosAFF22 ~~ PosAFF23
PosAFF31 ~~ PosAFF32 + PosAFF33
PosAFF32 ~~ PosAFF33
## latent variable intercepts
Pos1 ~ 0*1
Pos2  ~ 0*1
Pos3  ~ 0*1
#model constraints for effect coding
## loadings must average to 1
L1 == 3 - L2 - L3
## means must average to 0
t1 == 0 - t2 - t3
i =~ 1*Pos1 + 1*Pos2 + 1*Pos3
s =~ 0*Pos1 + 1*Pos2 + 2*Pos3 '
fit.sec.order <- growth(sec.order, data=long, missing = "ML")
summary(fit.sec.order, fit.measures=TRUE)
library(readr)
STATS_resting_state_BRIEF <- read_csv("~/Desktop/STATS_resting_state_BRIEF.csv")
View(STATS_resting_state_BRIEF)
#this converts variables to numeric starting from column 4
id <- c(1,4:ncol(PDS_stats))
PDS_stats[,id] <- as.numeric(as.character(unlist(PDS_stats[,id])))
library(lavaan)
library(semTools)
library(semPlot)
library(lme4)
library(tidyr)
PDS_stats$T3gecrs_combined_conv=PDS_stats$T3gecrs_Combined/100
PDS_stats$T12gecrs_conv=PDS_stats$T12gecrs/100
PDS_stats$T14gecrs_conv=PDS_stats$T14gecrs/100
as.numeric(as.character(unlist(PDS_stats[,id])))
PDS_stats <- read_csv("~/Desktop/STATS_resting_state_BRIEF.csv")
id <- c(1,4:ncol(PDS_stats))
PDS_stats[,id] <- as.numeric(as.character(unlist(PDS_stats[,id])))
library(lavaan)
library(semTools)
library(semPlot)
library(lme4)
library(tidyr)
PDS_stats$T3gecrs_combined_conv=PDS_stats$T3gecrs_Combined/100
PDS_stats$T12gecrs_conv=PDS_stats$T12gecrs/100
PDS_stats$T14gecrs_conv=PDS_stats$T14gecrs/100
as.numeric(as.character(unlist(PDS_stats[,id])))
model.bi <- '
#create global composite EF growth model
i.p =~ 1*T3gecrs_combined_conv + 1*T12gecrs_conv + 1*T14gecrs_conv
s.p =~ 0*T3gecrs_combined_conv + 1*T12gecrs_conv + 2*T14gecrs_conv
#create Global efficiency growth model
i.n =~ 1*S1_FPN_GE_K1to5 + 1*S2_FPN_GE_K1to5 + 1*S3_FPN_GE_K1to5
s.n =~ 0*S1_FPN_GE_K1to5 + 1*S2_FPN_GE_K1to5 + 2*S3_FPN_GE_K1to5
'
fit.bi <- growth(model.bi, data = PDS_stats)
summary(fit.bi)
fit.bi <- growth(model.bi, data = PDS_stats, missing = "ML")
summary(fit.bi)
sec.order <- '
###define latent variables
EFT3 =~ NA*T3brirs + L1*T3brirs + L2*T3mirs
EFT12 =~ NA*T12brirs + L1*T12brirs + L2*T12mirs
EFT14=~ NA*T14brirs + L1*T14brirs + L2*T14mirs
### intercepts
T3brirs ~ t1*1
T3mirs ~ t2*1
T12brirs ~ t1*1
T12mirs ~ t2*1
T14brirs ~ t1*1
T14mirs ~ t2*1
## correlated residuals across time
T3brirs ~~ T3mirs
T12brirs ~~ T12mirs
T14brirs ~~ T14mirs
## latent variable intercepts
EFT3 ~ 0*1
EFT12 ~ 0*1
EFT14 ~ 0*1
#model constraints for effect coding
## loadings must average to 1
L1 == 2 - L2
## means must average to 0
t1 == 0 - t2
i =~ 1*EFT3 + 1*EFT12 + 1*EFT14
s =~ 0*EFT3 + 1*EFT12 + 2*EFT14 '
fit.sec.order <- growth(sec.order, data=PDS_stats, missing = "ML")
summary(fit.sec.order, fit.measures=TRUE)
describe(PDS_stats$T3brirs)
library(psych)
describe(PDS_stats$T3brirs)
describe(PDS_stats$T3brirs)
describe(PDS_stats$T3mirs)
describe(PDS_stats$T12brirs)
describe(PDS_stats$T12mirs)
describe(PDS_stats$T14brirs)
describe(PDS_stats$T14mirs)
library(parellel)
install.packages("Parellel")
library(parallel)
detectCores()
